<% content_for :title, t(".title") %>
<%= turbo_stream_from [@team, :client_needs] %>
<% content_for :head do %>
  <%= stylesheet_link_tag "client/edit", "data-turbo-track": "dynamic" %>
<% end %>

<h1><%= @client.name %></h1>

<%= render "form", client: @client %>

  <% if @team.clients.count > 1 %>
  <div class="flexbox">
    <%= button_to "利用者を消去", [@team, @client], method: :delete, data: { turbo_confirm: t(".confirm_destroy") }, class: "flex-btn" %>
    <%= turbo_frame_tag "user_client" do %>
      <%= link_to "担当可能従業員の追加", new_user_client_path %>
    <% end %>
  </div>
  <% end %>

<div id="modal" class="modal">

  <div id="close-modal" class="close-modal">✕</div>
  <h3>シフト作成</h3>

  <% ClientNeed.weeks.keys.each do |week| %>
    <div class="card">
        <h4><%= t("activerecord.attributes.client_need.weeks.#{week}") %></h4>
        <div id="client_needs_<%= week %>">
          <%= render (@needs_by_week[week] || []) %>
        </div>
    </div>
  <% end %>

  <%= turbo_frame_tag "client_need" do %>
    <div class="flexbox">
      <%= link_to "新規追加", new_client_need_path , class: "flex-btn" %>
    </div>
  <% end %>

</div>

