<% content_for :title, "従業員の情報を編集" %>
<%= turbo_stream_from [@team, :user_needs] %>
<% content_for :head do %>
  <%= stylesheet_link_tag "user/edit", "data-turbo-track": "dynamic" %>
<% end %>

  <% if @team.users.exists? %>
      <%= link_to team_users_path(@team) do %>
        <%= image_tag "back-btn.png", alt: t(".users"), class: "back-image" %>
      <% end %>
  <% end %>

<h1><%= @user.name %></h1>

<%= render "form", user: @user %>

  <div class="flexbox">
    <% if @user != current_user %>
      <%= button_to "従業員を消去", [@team, @user], method: :delete, data: { turbo_confirm: t(".confirm_destroy") }, class: "flex-btn" %>
    <% else %>
      自分のアカウントは削除できません。
    <% end %>
  </div>

<div id="modal" class="modal">

    <div id="close-modal" class="back-btn">✕</div>
    <h3>出勤希望日</h3>

    <% UserNeed.weeks.keys.each do |week| %>
      <div class="card">
        <h4><%= t("activerecord.attributes.user_need.weeks.#{week}") %></h4>
        <div id="user_needs_<%= week %>">
           <%= render (@user_needs[week] || []) %>
        </div>
      </div>
    <% end %>

    <%= turbo_frame_tag "user_need" do %>
        <%= link_to "出勤希望日", new_user_need_path, class: "flex-btn" %>
    <% end %>

</div>


